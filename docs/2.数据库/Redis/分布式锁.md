

1. 加锁

使用set命令，加上NX，PX参数保证原子性；不可以使用setex

2. 解锁

通过eval脚本解锁，保证原子性；不可以在代码里判断

3. 幂等性

相同接口，相同参数，在某段时间内返回相同结果，保证幂等性

以接口和参数的md5值为键，返回结果为值，存在redis里