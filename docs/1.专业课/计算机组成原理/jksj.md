
现代计算机都是以冯诺依曼结构为基础设计的

冯诺依曼结构五部分:运算器，控制器，存储器，输入设备，输出设备

CPU主频，可以简单地理解为，1秒内可以执行多少个简单指令

CPU时钟周期是：1/主频

程序响应时间＝指令数 * CPI * 时钟周期

功耗？

计算机最终只能执行01这种机器指令，因为CPU本质上是由各种开关组成的逻辑电路组合，只有开和关两种状态，所有的高级语言最终执行的时候也都是以机器指令来执行的

PC寄存器存储下一条要执行的指令的地址；指令寄存器存储当前正在执行的指令内容；

if/else和for/while，在汇编的层面都是通过jmp相关指令来完成跳转的，其实就是修改下PC寄存器的值

把一个实际调用的函数产生的指令，直接插入到调用的位置，来替换对应的函数调用指令。这是一个常见的编译器进行自动优化的场景，我们通常叫函数内联。
内联带来的优化是，CPU需要执行的指令数变少了，根据地址跳转的过程不需要了，压栈和出栈的过程也不 用了。
不过内联并不是没有代价，内联意味着，我们把可以复用的程序指令在调用它的地方完全展开了。如果一个函数在很多地方都被调用了，那么就会展开很多次，整个程序占用的空间就会变大了。

函数调用过程模糊？

![](https://fanchaoo-notebook.oss-cn-beijing.aliyuncs.com/img/WX20191009-105327@2x.png)

ELF（Execuatable and Linkable File Format）

PE（Portable Executable Format）

如果我们有一个可以能够解析PE格式的装载器，我们就有可能在Linux下运行Windows程序了。这样的程序真的存在吗？没错，Linux下著名的开源项目Wine，就是通过兼容PE格式的装载器，使得我们能直接在Linux下运行Windows程序的。而现在微软的Windows里面也提供了WSL，也就是Windows Subsystem for Linux，可以解析和加载ELF格式的文件。不过很多程序还依赖各种操作系统本身提供的动态链接库，系统调用等等，需要wine提供对应的实现，兼容格式只是万里长征第一步。


"解释执行"的详细过程？

物理内存，虚拟内存？JVM申请的是物理内存吧？

动态链接的过程中，我们想要“链接”的，不是存储在硬盘上的目标文件代码，而是加载到内存中的共享库（Shared Libraries）


数值和字符，在计算机内都需要用二进制形式来表示

电报是现代计算机的一个最简单的原型。它和我们现在使用的现代计算机有很多相似之处。我们通过电路的“开”和“关”，来表示“1”和“0”。就像晶体管在不同的情况下，表现为导电的“1”和绝缘的“0”的状态。

我们可以通过设置不同的线路和开关状态，实现更多不同的信号表示和处理方式，这些线路的连接方式其实就是我们在数字电路中所说的门电路。而这些门电路，也是我们创建CPU和内存的基本逻辑单元。我们的各种对于计算机二进制的“0”和“1”的操作，其实都会由这些门电路来执行。


这些基本的门电路，是我们计算机硬件端的最基本的“积木”，就好像乐高积木里面最简单的小方块。看似不起眼，但是把它们组合起来，最终可以搭出一个星球大战里面千年隼这样的大玩意儿。我们今天包含十亿级别晶体管的现代CPU，都是由这样一个一个的门电路组合而成的。


要表示一个8位数的整数，简单地用8个bit，也就是8个电路开关就好了


通过一个异或门计算出个位，通过一个与门计算出是否进位，我们就通过电路算出了一个一位数的加法。于是，我们把两个门电路打包，给它取一个名字，就叫作半加器（Half Adder，单个比特加法）


在硬件层面，我们通过门电路、半加器、全加器一层层搭出了加法器这样的功能组件。我们把这些用来做算术逻辑计算的组件叫作ALU，也就是算术逻辑单元。当进一步打造强大的CPU时，我们不会再去关注最细颗粒的门电路，只需要把门电路组合而成的ALU，当成一个能够完成基础计算的黑盒子就可以了。


无论是这里把对应的门电路逻辑进行完全展开以减少门延迟，还是上面的乘法通过并行计算多个位的乘法，都是把我们完成一个计算的电路变复杂了。而电路变复杂了，也就意味着晶体管变多了。我们通过更多的晶体管，就可以拿到更低的门延迟，以及用更少的时钟周期完成一个计算指令。

通过精巧地设计电路，用较少的门电路和寄存器，就能够计算完成乘法这样相对复杂的运算。是用更少更简单的电路，但是需要更长的门延迟和时钟周期；还是用更复杂的电路，但是更短的门延迟和时钟周期来计算一个复杂的指令，这之间的权衡，其实就是计算机体系结构中RISC和CISC的经典历史路线之争。

![二进制乘法计算过程](https://fanchaoo-notebook.oss-cn-beijing.aliyuncs.com/img/WechatIMG178.png)





