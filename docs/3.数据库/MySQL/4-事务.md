# 1. 事务



# 3. 锁

锁的作用其实就是**管理对共享资源的并发访问**。

在数据库层面，锁其实是为了防止两个事务**以造成不良后果的方式**存取数据的相同部分。

如果非要说，锁的本质是什么？其实就是内存里的一些变量，只不过这些变量有特殊的用处，就被称为所谓的锁了。

有时候，如果不能使用索引来查找和锁定行的话，InnoDB可能会做全表扫描，并锁住所有的行。


悲观锁：假设其它事务都会修改该数据，所以在一开始就会对数据进行加锁以防止其它事务修改。

乐观锁：假设其它事务不会修改该数据，不会在一开始就对数据加锁，而是在修改的时候判断下数据有没有被其它事务修改，如果没有的话，则更新成功。否则的话，可以进行重试，或者返回错误信息。乐观锁可以通过加一个版本号字段来实现。适用于读操作比较多，竞争写操作比较少的场景，因为不需要提前加锁，和完成操作后的解锁操作，所以效率会比悲观锁好。





